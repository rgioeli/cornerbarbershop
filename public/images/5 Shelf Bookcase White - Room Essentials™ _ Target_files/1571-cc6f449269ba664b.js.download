(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1571],{69877:function(e){var t=Math.floor,r=Math.random;e.exports=function(e,i){return e+t(r()*(i-e+1))}},45021:function(e,t,r){var i=r(35393)((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}));e.exports=i},83608:function(e,t,r){var i=r(69877),n=r(16612),o=r(18601),s=parseFloat,u=Math.min,c=Math.random;e.exports=function(e,t,r){if(r&&"boolean"!=typeof r&&n(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=o(e),void 0===t?(t=e,e=0):t=o(t)),e>t){var a=e;e=t,t=a}if(r||e%1||t%1){var l=c();return u(e+l*(t-e+s("1e-"+((l+"").length-1))),t)}return i(e,t)}},14035:function(e,t,r){var i=r(35393)((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}));e.exports=i},59397:function(e,t,r){"use strict";r.d(t,{EZ:function(){return w},Kp:function(){return m}});var i=r(68697);var n={ALL:"ALL",CUSTOM:"CUSTOM",WEDDING:"WEDDING",BABY:"BABY",COLLEGE:"COLLEGE",SHOPPING_LIST:"SHOPPING_LIST",WISH_LIST:"WISH_LIST",GENERIC:"GENERIC",CHARITY:"CHARITY",HOUSEWARMING:"HOUSEWARMING",ANNIVERSARY:"ANNIVERSARY",PET:"PET",BIRTHDAY:"BIRTHDAY",HOLIDAY:"HOLIDAY",OTHER:"OTHER",BOY:"BOY",GIRL:"GIRL",MORE:"MORE",UNDEFINED_GENDER:"UNDEFINED",CHANNEL_WEB:"WEB",SUBCHANNEL_DESKTOP:"TGTWEB",SUBCHANNEL_TABLET:"TABLET",SUBCHANNEL_MOBILE:"MWEB"};const o=e=>e;(0,i.P1)(o,(e=>null===e||void 0===e?void 0:e.find((e=>e.registry_type===n.BABY)))),(0,i.P1)(o,(e=>null===e||void 0===e?void 0:e.find((e=>e.registry_type===n.WEDDING)))),(0,i.P1)(o,(e=>null===e||void 0===e?void 0:e.find((e=>e.registry_type===n.CUSTOM)))),(0,i.P1)(o,(e=>null===e||void 0===e?void 0:e.find((e=>e.registry_type===n.CHARITY))));var s=r(59499),u=r(83608),c=r.n(u),a=r(96012),l=r(69027),d=r(92354);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}const p=e=>{var t,r;const{apiKey:i,apis:{registriesV2:n},baseUrl:o}=(0,a.asConfigV2)(a.config).services.apiPlatform,{fetchOptions:u,requestParams:p}=null!==e&&void 0!==e?e:{},{profile_id:v}=null!==p&&void 0!==p?p:{},f=d.Z.buildURLWithParams(new URL(null!==(t=null===(r=n.endpointPaths)||void 0===r?void 0:r.v2)&&void 0!==t?t:"",o),{profile_id:v,channel:"WEB",sub_channel:"TGTWEB",sn_id:c()(1,99999999,!1),key:i});return(0,l.U2)(f,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u))};var v=r(64595),f=r(18426);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const O="@web/domain-registry/registries/queries/get-registries",{useQuery:b}=(0,v.J)({name:O,keyFn:e=>{const{apiKey:t}=(0,a.asConfigV2)(a.config).services.apiPlatform;if(!t)throw new Error(`API key required for ${O}`);return[O,e]},queryFn:async(e,{requestMetricsOptions:t}={})=>{const{data:r}=await p({requestParams:e,fetchOptions:g({errorTag:O,timerTag:O,credentials:"include"},t)});return r},defaultOptions:{staleTime:3e4}}),m=(0,f.Hv)(b,{blockCallOnAuthFail:!0,minimumAssuranceLevel:f.Jr});function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=r(98689);const I="@site-registry/domains/registry/add-item/mutations/add-item",{useMutation:h}=(0,j.F)({name:I,mutationFn:async e=>{const t=(e=>{var t,r;const{fetchOptions:i,requestParams:o}=null!==e&&void 0!==e?e:{},{apiKey:s,apis:{registriesV2:u},baseUrl:c}=(0,a.asConfigV2)(a.config).services.apiPlatform,y=`${null!==(t=null===(r=u.endpointPaths)||void 0===r?void 0:r.v2)&&void 0!==t?t:""}/${null===o||void 0===o?void 0:o.registry_id}/registry_items`,p=d.Z.buildURLWithParams(new URL(y,c),{channel:n.CHANNEL_WEB,sub_channel:n.SUBCHANNEL_DESKTOP,location_id:"3991",key:s,registry_id:null===o||void 0===o?void 0:o.registry_id});let v={};switch(null===o||void 0===o?void 0:o.registry_item_type){case"TCIN":{const e=o;v={tcin:null===e||void 0===e?void 0:e.tcin,requested_quantity:null===e||void 0===e?void 0:e.requested_quantity,purchased_quantity:null===e||void 0===e?void 0:e.purchased_quantity,registry_item_type:null===o||void 0===o?void 0:o.registry_item_type,item_note:null===o||void 0===o?void 0:o.item_note,added_by_recipient:null===e||void 0===e?void 0:e.added_by_recipient,most_wanted_flag:null===o||void 0===o?void 0:o.most_wanted_flag};break}case"EXTERNAL_ITEM":{const e=o;v={registry_item_type:null===e||void 0===e?void 0:e.registry_item_type,external_product_url:null===e||void 0===e?void 0:e.external_product_url,external_retailer:null===e||void 0===e?void 0:e.external_retailer,external_product_price:null===e||void 0===e?void 0:e.external_product_price,external_product_size:null===e||void 0===e?void 0:e.external_product_size,external_product_color:null===e||void 0===e?void 0:e.external_product_color,external_product_image_url:null===e||void 0===e?void 0:e.external_product_image_url,requested_quantity:null===e||void 0===e?void 0:e.requested_quantity,purchased_quantity:null===e||void 0===e?void 0:e.purchased_quantity,item_title:null===e||void 0===e?void 0:e.item_title,item_note:null===e||void 0===e?void 0:e.item_note,most_wanted_flag:null===e||void 0===e?void 0:e.most_wanted_flag,visibility_indicator:null===e||void 0===e?void 0:e.visibility_indicator};break}case"HONEYFUND_ITEM":{const e=o;v={registry_item_type:null===e||void 0===e?void 0:e.registry_item_type,item_note:null===e||void 0===e?void 0:e.item_note,most_wanted_flag:null===e||void 0===e?void 0:e.most_wanted_flag,visibility_indicator:null===e||void 0===e?void 0:e.visibility_indicator,honeyfund_item_experience_id:null===e||void 0===e?void 0:e.honeyfund_item_experience_id};break}}return{fetch:()=>(0,l.v_)(p,P(P({credentials:"include"},i),{},{headers:{Accept:"application/json"},body:JSON.stringify({items:[v]})})),url:p,options:e}})({requestParams:e,fetchOptions:{errorTag:I,timerTag:I}}),{data:r,ok:i,statusText:o}=await t.fetch().catch((e=>{401===e.status&&(0,f.zB)()}));if(i)return r;throw new Error(`${o}`)}}),w=(0,f.tW)(h,{minimumAssuranceLevel:f.Jr})},14964:function(e,t,r){"use strict";r.d(t,{A8:function(){return n},D:function(){return c},Dk:function(){return u},LL:function(){return l},Oe:function(){return i},So:function(){return o},qN:function(){return a},vC:function(){return s},vq:function(){return y},xb:function(){return d}});const i="https://www.target.com/gift-registry",n="regModeLP",o="Add to registry",s="GG",u="REGST",c="REG",a="CUSTOM",l="WEDDING",d="BABY",y="CHARITY"},91571:function(e,t,r){"use strict";r.d(t,{Q:function(){return E},g:function(){return P}});var i=r(59499),n=r(45021),o=r.n(n),s=r(14035),u=r.n(s),c=r(79833),a=r.n(c),l=r(67294),d=r(11163),y=r(48113),p=r(26098),v=r(18426),f=r(59397),_=r(73240),g=r(14964);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const m=(0,y.ej)(g.A8);function E(){const e=(0,d.useRouter)(),{query:t}=e,r=(0,p.jI)(t,"regMode"),i=(0,p.jI)(t,"registryId"),n=(0,p.jI)(t,"itemLineNum"),o=(0,p.jI)(t,"registryType"),s=(0,p.jI)(t,"type"),c=a()(r),y=(0,v.xd)(),f=(0,l.useMemo)((()=>c===g.vC||c===g.Dk),[c]),_=(0,l.useCallback)((()=>c===g.vC),[c]),O=(0,l.useCallback)((()=>{if(i){var e;const t=n?{registry_line_id:n}:{};return{registry_information:b({registry_id:i,registry_subtype:u()(null!==(e=null!==o&&void 0!==o?o:s)&&void 0!==e?e:""),registry_type:"Registry"},t)}}}),[n,i,o,s]),E=(0,l.useMemo)((()=>!(!m&&c!==g.Dk)),[c]),P=(0,l.useMemo)((()=>c===g.vC),[c]),j=(0,l.useMemo)((()=>c===g.D||!f&&!!m),[f,c]),I=(0,l.useMemo)((()=>!(!y||!j&&!f)),[j,f,y]);return{isGiftGiverOrRegistrantFromMyItems:f,registryModeStatusFromCookie:m,getRegistryInformationForAddToCart:O,hasRegistryModeStatus:j,isInRegistrantMode:E,isInGiftGiverMode:P,isInRegistryMode:I,getRegistryGiftGiverStatus:_}}function P({registryId:e,tcin:t,isStandaloneOrChildItem:r=!0,forceOpenMultipleRegistryDrawer:i=!1,addItemToRegistryOnSuccessCallback:n,addItemToRegistryOnErrorCallback:s,openCreateARegistryModal:u,openMultipleRegistryDrawer:c}){const a=(0,d.useRouter)(),{query:y}=a,g=(0,v.zy)(),O=(0,v.Pd)(),[b,{isSuccess:m}]=(0,f.Kp)(),E=b(),P=(0,v.xd)(),j=(0,p.jI)(y,"registryId"),I=1===(null===E||void 0===E?void 0:E.length)?E[0].registry_id:null,h=Boolean(e||j||I),{ffCustomInteraction:w,ffComponentload:T}=(0,_.d)(),[C]=(0,f.EZ)({onSuccess:async()=>{var r,i;const s=null!==(r=null!==e&&void 0!==e?e:j)&&void 0!==r?r:I,u=null===E||void 0===E||null===(i=E.find((e=>(null===e||void 0===e?void 0:e.registry_id)===s)))||void 0===i?void 0:i.registry_type;w(`registry_tcin_${t}_added_to_registry`),T({addToRegistry:!0,registries:[{hasItems:!1,id:s,type:`${o()(u)} registry`}]}),n()},onError:async()=>{w(`registry_tcin_${t}_add_to_registry_failed`),s()}}),D=(0,l.useCallback)((async()=>{w("registry_add_to_registry_button_clicked"),P?m&&(null!==E&&void 0!==E&&E.length||!u?h&&r&&!i?C({tcin:t,requested_quantity:1,purchased_quantity:0,registry_item_type:"TCIN",added_by_recipient:!0,registry_id:e||j||I||""}):c():u()):(0,v.zB)()}),[w,P,m,null===E||void 0===E?void 0:E.length,u,h,r,i,C,t,e,j,I,c]);return{handleRegistryButtonClick:(0,l.useCallback)((async()=>{O&&(g?D():(0,v.zB)())}),[D,O,g])}}},73240:function(e,t,r){"use strict";r.d(t,{d:function(){return y}});var i=r(59499),n=r(45021),o=r.n(n),s=r(67294),u=r(11163),c=r(17724),a=r(26098);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(){const e=(0,c.rS)(),t=(0,u.useRouter)(),{query:r}=t,i=(0,a.jI)(r,"type"),n=(0,a.jI)(r,"registryId"),l=(0,s.useMemo)((()=>n&&i?{registries:[{hasItems:!1,id:n,type:`${o()(i)} registry`}]}:{}),[n,i]);return{ffCustomInteraction:function(t,r={}){t&&e.trackEvent({guest:{eventType:"customInteraction"},customInteraction:d({value:t},r)})},ffAdImpressionsInteraction:function(t){t&&e.trackEvent({guest:{eventType:"adimp"},adImpressions:t})},ffComponentload:function(t={}){e.trackEvent({guest:{eventType:"componentload"},registry:d(d({},l),t)})}}}}}]);