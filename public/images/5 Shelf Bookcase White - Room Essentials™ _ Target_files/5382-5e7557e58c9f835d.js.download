"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5382],{65382:function(e,t,n){n.d(t,{Z:function(){return U}});var o=n(59499),r=n(85893),i=n(67294),a=n(4730),c=n(50308),s=n.n(c),l=n(94184),u=n.n(l),d=n(19521),p=n(32339),v=n(11393),f=n(81668),g=n(11991),h=n(88299);const m=["caption","center","className","error","isFetching","onClick"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const b="@web/GeolocationButton/Button",j="@web/GeolocationButton/LoadingSpinner",P=(0,d.ZP)(g.Yd).withConfig({displayName:"GeolocationButton__BlankButton",componentId:"sc-13vdkjk-0"})(["border-color:transparent;min-height:48px;width:100%;height:100%;align-items:start;justify-content:start;&:focus{text-decoration:none;}"]),w=d.ZP.span.attrs({className:"h-text-sm h-text-left h-text-orangeDark h-padding-v-x1 h-display-block"}).withConfig({displayName:"GeolocationButton__StyledError",componentId:"sc-13vdkjk-1"})(["margin-left:32px;white-space:normal;margin-top:",";"],f.space.generic.x1),x=e=>{let{caption:t="Use my current location",center:n=!1,className:o,error:i,isFetching:c=!1,onClick:l=s()}=e,d=(0,a.Z)(e,m);return(0,r.jsx)("div",O(O({className:u()(o,{"h-text-center":n})},(0,v.m)(d)),{},{children:(0,r.jsxs)(P,{className:"h-padding-h-x2 h-padding-v-tight","data-test":b,onClick:l,role:"link",children:[(0,r.jsxs)("div",{className:"h-flex-direction-col",children:[(0,r.jsxs)("div",{className:"h-display-flex h-flex-align-center",children:[(0,r.jsx)(p.L,{size:24}),(0,r.jsx)("span",{className:"h-text-underline h-text-grayDark h-text-default h-margin-h-x2",children:t})]}),!!i&&(0,r.jsx)(w,{role:"alert",children:i})]}),c&&(0,r.jsx)(h.$,{className:"h-margin-v-tiny h-margin-r-none","data-test":j,size:"xsmall"})]})}))};async function _(){const{coords:{accuracy:e,latitude:t,longitude:n}}=await new Promise(((e,t)=>{var n;const o=null===(n=window.navigator)||void 0===n?void 0:n.geolocation;if(null===o||void 0===o||!o.getCurrentPosition)return t({message:"Geolocation API not available"});o.getCurrentPosition((t=>e(t)),(e=>t({message:e.message,code:e.code})))}));return{accuracy:e,latitude:t,longitude:n}}x.displayName="GeolocationButton";var k=n(64595),C=n(52054);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E="@web/domain-locations/get-location-from-geolocation",{useQuery:S}=(0,k.J)({name:E,keyFn:e=>void 0!==e.latitude&&void 0!==e.longitude&&[E,e],queryFn:async({latitude:e,longitude:t},{requestMetricsOptions:n}={})=>{const o={place:`${e},${t}`},r=(0,C.r)({requestParams:o,fetchOptions:D({errorTag:"get_location_from_geolocation_geocodes_v1_api_error",timerTag:"get_location_from_geolocation_geocodes_v1_api_call"},n)}),{data:i,ok:a,statusText:c}=await r.fetch();if(a)return i;throw new Error(`${c}`)}});var B=n(45175);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const U=({onGeolocationDataLoaded:e,requestMetricsOptions:t})=>{const{0:n,1:o}=(0,i.useState)("idle"),{0:a,1:c}=(0,i.useState)(null),s=(0,i.useCallback)((async()=>{o("pending");try{const{latitude:e,longitude:t}=await _();c({latitude:e,longitude:t})}catch(e){o("error")}}),[]),[l,{isError:u,isSuccess:d}]=S(null!==a&&void 0!==a?a:{},t);return(0,i.useEffect)((()=>{if(a&&d&&"pending"===n){const t=l(B.Ol),n=l(B.so),r=l(B.Vv);if(!t)return;o("success"),e(Z(Z({},a),{},{zipCode:t,state:n,countryCode:r}))}}),[a,n,d,e,l]),(0,i.useEffect)((()=>{u&&o("error")}),[u]),(0,r.jsx)(x,{error:"error"===n?"We are unable to retrieve your location. Please try again later.":void 0,isFetching:"pending"===n,onClick:s})};U.displayName="GeolocationButtonContainer"},45175:function(e,t,n){n.d(t,{Vv:function(){return p},WW:function(){return l},hU:function(){return u},so:function(){return d},Ol:function(){return s}});var o=n(68697);const r={"United States":"US"},i=((0,o.P1)((e=>null===e||void 0===e?void 0:e.locations),(e=>null!==e&&void 0!==e?e:[])),e=>null===e||void 0===e?void 0:e.address),a=(0,o.P1)(i,(e=>null===e||void 0===e?void 0:e.postal_code)),c=((0,o.P1)(a,(e=>{var t;return null===e||void 0===e||null===(t=e.match(/\d{5}/))||void 0===t?void 0:t[0]})),(0,o.P1)(i,a,((e,t)=>[null===e||void 0===e?void 0:e.address_line1,null===e||void 0===e?void 0:e.address_line2,null===e||void 0===e?void 0:e.city,[null===e||void 0===e?void 0:e.region,t].filter(Boolean).join(" ")].filter(Boolean).join(", "))),e=>{var t,n;return null===(t=(e=>null===e||void 0===e?void 0:e.locations)(e))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.address}),s=e=>{var t;return null===(t=c(e))||void 0===t?void 0:t.postalCode},l=e=>{var t;return null===(t=c(e))||void 0===t?void 0:t.latitude},u=e=>{var t;return null===(t=c(e))||void 0===t?void 0:t.longitude},d=e=>{var t;return null===(t=c(e))||void 0===t?void 0:t.subdivision},p=e=>{const t=(e=>{var t;return null===(t=c(e))||void 0===t?void 0:t.countryName})(e);return t?r[t]:void 0}},52054:function(e,t,n){n.d(t,{r:function(){return a}});var o=n(96012),r=n(69027),i=n(92354);const a=(0,n(72113).N)()((e=>{const{fetchOptions:t,requestParams:n}=e,{apis:{locationPromixitiesV1:a},baseUrl:c,apiKey:s}=(0,o.asConfigV2)(o.config).services.apiPlatform,l=i.Z.buildURLWithParams(new URL(a.endpointPaths.geocodes,c),{place:n.place,key:s});return{fetch:()=>(0,r.U2)(l,t),options:e,url:l}}))},32339:function(e,t,n){n.d(t,{L:function(){return l}});var o=n(67294),r=n(53131),i=n(93862);let a;const c=(0,r.No)(a||(a=(e=>e)`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M12 .75c4.419 0 8 3.614 8 7.885 0 1.282-.215 2.326-.666 3.286C19.18 12.35 16.737 16.044 12 23c-4.737-6.956-7.181-10.65-7.334-11.08C4.202 10.926 4 9.918 4 8.636 4 4.365 7.582.75 12 .75Zm0 4.75a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Z"/></svg>`)),s={id:"GeneralMapPin",monochrome:!0,grayscale:!1,fullColor:!1,fills:["#cc0000"],nameComponents:{name:"MapPin",category:"General",variant:null}},l=e=>{var t;const n=(0,i.L)("nds-Icon"),r=c({idPrefix:null!==(t=e.id)&&void 0!==t?t:n});return o.createElement(i.J,Object.assign({},e,{svgData:r,svgMetadata:s}))};l.metadata=s,l.displayName="IconGeneralMapPin"}}]);