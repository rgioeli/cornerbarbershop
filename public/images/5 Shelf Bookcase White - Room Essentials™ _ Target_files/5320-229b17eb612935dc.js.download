"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5320],{39084:function(e,r,t){t.d(r,{R:function(){return I}});var o=t(19525),n=t(59499),a=t(67294),i=t(11163),s=t(17724),c=t(30094),d=t(88169),l=t(22803),u=t(31362),p=t(38561),v=t(3762),P=t(57196),b=t(76713),f=t(41),h=t(4601),y=t(41609),_=t.n(y),O=t(74965),g=t(61982),m=t(50794);const R=()=>{const{asPath:e}=(0,i.useRouter)(),r=(0,O.aZ)(e),t=(0,g.s)(e,r),o=(0,m.e2)(e),n=(0,m.WS)(e),a=(0,c.r)()((0,d.KV)("/adaptive/placeholders/productgrid/v01/mobile")),s=_()(a);return t||o||!n&&s};function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}const E=e=>{var r,t;const{isEnhancedPayloadReady:o}=e,{asPath:y}=(0,i.useRouter)(),{trackEvent:_}=(0,s.rS)(),O=(0,c.r)(),g=O(),E=Boolean(g),w=(0,f.p)(),j=(0,l.A)(u.uS),{shouldUseIsolatedPriceAndPromo:A,stableOriginalSearchResponse:C}=(0,h.k)(),T=null===C||void 0===C||null===(r=C.searchResponse)||void 0===r?void 0:r.products,N=A?T:j,D=R(),k=null===(t=(0,l.A)(p.DH))||void 0===t?void 0:t.promotion_id,I=(()=>{const{asPath:e}=(0,i.useRouter)();return(0,m.WS)(e)})(),L=(0,b._)(N),V=(0,P.a)();return(0,a.useEffect)((()=>{if(!o)return;if(!E&&!w)return;const e=(0,v.o)(y),r=O(d.kd),t=new Set(["/adaptive/placeholders/productgrid/v01/mobile","/adaptive/c_web_a_0045/v01/mobile","/adaptive/seller-productgrid"]);let a=null===r||void 0===r?void 0:r.some((e=>{var r;return t.has(null!==(r=e.presentation)&&void 0!==r?r:"")}));"promo"===e&&(a=!0);const i=new Set(["bubcat","/adaptive/c_web_a_0003/v04/mobile","/adaptive/c_web_a_0015/v03/mobile","/adaptive/c_web_a_0030/v01/mobile"]),s={name:"plp_configuration",source:`pageType:${e}|hasGrid:${a}|hasBubNav:${null===r||void 0===r?void 0:r.some((e=>{var r;return i.has(null!==(r=e.presentation)&&void 0!==r?r:"")}))}`,type:"pageload"};setTimeout((()=>{_(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({guest:{eventType:"pageload"},event:s,experience:V},I&&k?{promotionInfo:{promos:[{id:k}]}}:void 0)),_({guest:{eventType:"prodimp"}}),_({guest:{eventType:"adimp"},adImpressions:D?[]:L})}))}),[L,V,E,o,w,D,I,k,_,y,O]),null};E.displayName="ProductListingPageTrackEvents";var w=t(98298),j=t(78005),A=t(36118),C=t(96207),T=t(53356);function N(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?N(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const k=()=>{const e=R(),r=(0,j.U)(),t=(0,b.w)(),o=(0,l.A)(A.Oy),n=(0,C.P)(o),i=(0,a.useCallback)((o=>{const a=D(D({},o),{},{experimentsViewed:n});return e?a.products=[]:(a.products=r,a.searchResults=t),a}),[e,r,t,n]);return{isEnhancedPayloadReady:(()=>{const e=(0,l.A)(A.wj),r=(0,l.A)(A.RJ),t=(0,l.A)(A.rQ),{hasPlpSearchPreloadVariablesFromSSR:o,hasCorrectedSearchResponseContextMetadata:n}=(0,a.useContext)(T.o);return Boolean(!r&&!e&&t&&(!o||n))})(),makeEnhancedPayload:i}},I=({children:e})=>{const{makeEnhancedPayload:r,isEnhancedPayloadReady:t}=k();return(0,o.Z)(w.H,{makeEnhancedPayload:r},void 0,(0,o.Z)(E,{isEnhancedPayloadReady:t}),e)};I.displayName="ProductListingPageWithTrackingPayload"},58539:function(e,r,t){t.d(r,{V:function(){return se}});var o=t(19525),n=t(67294),a=t(11163),i=t(66388),s=t(52079),c=t(26098),d=t(59499),l=t(55372),u=t(31362),p=t(35963),v=t(17613),P=t(30094),b=t(88169),f=t(92354),h=t(96012),y=t(35409),_=t(17943),O=t(81844),g=t(50794),m=t(53356),R=t(22803),S=t(36118);const E=({setPostFetchMetadata:e})=>{const r=(0,R.A)(S.RJ),t=(0,R.A)(S.wj),{setHasCorrectedSearchResponseContextMetadata:o}=(0,n.useContext)(m.o),[a,i]=(0,y.usePlpSearchV2QueryWithVariables)({},{shouldNotWaitForCorrectVariablesOnHardRoute:!0,enabled:!t&&!r}),s=a(),c=null===s||void 0===s?void 0:s.search;return(0,n.useEffect)((()=>{if(null!==i&&void 0!==i&&i.isSuccess&&c){const r=(0,p.N_)(c),t=(0,p.mC)(c);e({total_pages:r,total_results:t}),null===o||void 0===o||o(!0)}}),[s,c,o,e,null===i||void 0===i?void 0:i.isSuccess]),null};E.displayName="ProductListPaginationPostfetchFromSSR";var w=t(78718),j=t.n(w),A=t(82492),C=t.n(A),T=t(26306),N=t(41609),D=t.n(N),k=t(88141),I=t(76291),L=t(64595),V=t(17099),G=t(59681),Z=t(59491),M=t(18426),F=t(10341);const x="@web/domain-product/get-plp-price-promo-v1";function q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function W(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?q(Object(t),!0).forEach((function(r){(0,d.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const{useQuery:B}=(0,L.J)({name:x,keyFn:e=>{var r;if(D()(e.tcins)&&(null===e||void 0===e||null===(r=e.tcins)||void 0===r||!r.length))throw new TypeError("tcins are required for plp_price_promo_v1 query");return[x,e]},queryFn:async e=>{const{tcins:r=[],pricing_store_id:o,member_id:n}=null!==e&&void 0!==e?e:{},{apiKey:a,baseUrl:i,apis:{product:{endpointPaths:s}}}=(0,h.asConfigV2)(h.config).services.redskyAggregations;if(null===s||void 0===s||!s.plpPricePromoV1)throw new Error("path not defined for plp_price_promo_v1 query");const c=await(0,I.W)(),{data:d,ok:l,statusText:u}=await(0,V._)(r.filter(G.y),(e=>{const r={key:a,effective_date:c,tcins:e.join(","),pricing_store_id:o,member_id:n},d=f.Z.buildURLWithParams(null===s||void 0===s?void 0:s.plpPricePromoV1,r,i);return(0,k.G)(d,{errorTag:F.jD.REDSKY_AGGREGATIONS_PLP_PRICE_PROMO_API_ERROR,partialErrorTag:F.jD.REDSKY_AGGREGATIONS_PLP_PRICE_PROMO_PARTIAL_API_ERROR,timerTag:F.sO.REDSKY_AGGREGATIONS_PLP_PRICE_PROMO_API_CALL,importQuerySource:()=>t.e(5464).then(t.t.bind(t,90421,17))})}));if(l)return null===d||void 0===d?void 0:d.data;throw new Error(`${u}`)}}),K=(e,r)=>{var t;const o=null===e||void 0===e?void 0:e.map((e=>(0,T.hg)(e))),[a,i]=((e,r)=>{const t=(0,M.Pd)(),o=(0,M.bC)(),{pricingStoreId:a,enabled:i}=(0,Z.K)(),s=t&&i,c=(0,n.useMemo)((()=>W(W({},e),{},{pricing_store_id:a,member_id:o})),[e,a,o]);return B(c,{enabled:s&&("undefined"===typeof(null===r||void 0===r?void 0:r.enabled)||r.enabled)})})({tcins:o},{enabled:Boolean(null===o||void 0===o?void 0:o.length)&&(null===(t=null===r||void 0===r?void 0:r.enabled)||void 0===t||t)}),s=a(),c=(0,l.s_)(i),d=(0,n.useMemo)((()=>c.isSuccess?((e,r)=>r?null===e||void 0===e?void 0:e.map((e=>C()({},e,j()(r.find((r=>(0,T.hg)(e)===(0,T.hg)(r))),["price","promotions","parent.price","parent.promotions"])))):e)(e,null===s||void 0===s?void 0:s.product_summaries):e),[c.isSuccess,e,null===s||void 0===s?void 0:s.product_summaries]);return[d,c]};var U=t(4601);function Q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function H(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Q(Object(t),!0).forEach((function(r){(0,d.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const J=({children:e})=>{const r=(0,a.useRouter)(),{asPath:t,query:i,replace:s}=r,d=(0,g.qP)(t),R=(0,P.r)(),[S]=(0,_.k)({partner_id:R(b.MA)},{enabled:Boolean(d)}),w=S(O.L),j=null===w||void 0===w?void 0:w.facet_id,{hasPlpSearchPreloadVariablesFromSSR:A,plpSearchPreloadVariables:C}=(0,n.useContext)(m.o),T=A||(0,h.flags)("PLP_ISOLATED_PRICE_AND_PROMO_ENABLED"),N=H(H(H({},d&&j?{category:j}:void 0),T?{skip_price_promo:!0}:void 0),null!==C&&void 0!==C?C:void 0),[D,k]=(0,y.usePlpSearchV2QueryWithVariables)(N,{shouldUseOnlyVariableOverrides:A,shouldNotWaitForCorrectVariablesOnHardRoute:!0,enabled:!d||Boolean(j)}),I=(0,l.s_)(k),L=D(),V=null===L||void 0===L?void 0:L.search,G=(0,u.uS)(V),Z=(0,p.th)(V),[M,F]=K(G,{enabled:T&&I.isSuccess}),x=(0,l.s_)(F),{0:q,1:W}=(0,n.useState)(),B=(0,n.useMemo)((()=>{var e;return I.isSuccess||I.isError||A?H(H({},V),{},{search_response:H(H({},null===V||void 0===V?void 0:V.search_response),{},{metadata:H(H({},null===V||void 0===V||null===(e=V.search_response)||void 0===e?void 0:e.metadata),q)}),products:null!==M&&void 0!==M?M:G}):void 0}),[I,A,V,M,G,q]);(0,n.useEffect)((()=>{if(!Z)return;const e=null===Z||void 0===Z?void 0:Z.replace(/^https?:\/\/www.target.com/,"");s(e)}),[s,Z]);const Q="true"===(0,c.jI)(i,"facetRecovery")||void 0;return(0,n.useEffect)((()=>{if(!Q)return;const e=new f.Z(t).removeQuery("facetRecovery").toString();s(e)}),[Q,t,s]),Z?null:(0,o.Z)(v.U,{debugName:"PlpSearchV2Fetcher",queryResult:I,searchResponseData:B},void 0,(0,o.Z)(U.h,{queryResult:x,shouldUseIsolatedPriceAndPromo:T,stableOriginalSearchResponse:V},void 0,e,A&&(0,o.Z)(E,{setPostFetchMetadata:W})))};J.displayName="PlpSearchV2Fetcher";var Y=t(49821),$=t(5152),z=t.n($),X=t(15868);const ee=z()((()=>t.e(426).then(t.bind(t,67628)).then((e=>e.ProductListingPageJsonLdScript))),{loadableGenerated:{webpack:()=>[67628]}}),re=(e,r)=>{X.Z.err("load_json_ld_component_error",{error:e,message:r})};function te(){return(0,o.Z)(Y.S,{onError:re},void 0,(0,o.Z)(ee,{}))}te.displayName="ProductListingPageJsonLd";var oe=t(15363),ne=t(75776);const ae=()=>{const e=(0,oe.CP)(),r=(0,P.r)(),t=!e||Boolean(r()),o=(0,R.A)((e=>e)),a=(0,n.useCallback)((()=>{t&&(D()(o)||X.Z.logPageLoaded())}),[t,o]);return(0,ne.I)(a),null};ae.displayName="ProductListingPageMetrics";var ie=t(55898);const se=({ssrPreloadVariables:e,children:r})=>{const{isBot:t}=(0,n.useContext)(i.I.Context),d=(0,a.useRouter)(),l=(0,c.jI)(d.query,"Nao"),{0:u,1:p}=(0,n.useState)(!1),v=(0,n.useMemo)((()=>({hasPlpSearchPreloadVariablesFromSSR:Boolean(e),plpSearchPreloadVariables:e,hasCorrectedSearchResponseContextMetadata:u,setHasCorrectedSearchResponseContextMetadata:p})),[u,e]);return(0,o.Z)(m.o.Provider,{value:v},void 0,(0,o.Z)(J,{},void 0,(0,o.Z)(s.u,{pageSize:ie.f,paginationParamValue:l}),t?(0,o.Z)(te,{}):null,(0,o.Z)(ae,{}),r))};se.displayName="ProductListingPageWrapper"},17943:function(e,r,t){t.d(r,{k:function(){return d}});var o=t(64595),n=t(88141),a=t(92354),i=t(10341),s=t(96012);const c="@web/domain/partner-content-v1",{useQuery:d}=(0,o.J)({name:c,keyFn:e=>{if("undefined"===typeof e.partner_id)throw new TypeError("partner_id is required");return[c,e]},queryFn:async e=>{var r;const{partner_id:t}=null!==e&&void 0!==e?e:"",{apiKey:o,baseUrl:c,apis:{product:d}}=(0,s.asConfigV2)(s.config).services.redskyAggregations;if(null===(r=d.endpointPaths)||void 0===r||!r.partnerContentV1)throw new Error("path not defined for partner_content_v1 query");const l={key:o,partner_id:t},u=a.Z.buildURLWithParams(d.endpointPaths.partnerContentV1,l,c),{data:p,ok:v,statusText:P}=await(0,n.G)(u,{errorTag:i.jD.REDSKY_AGGREGATIONS_PARTNER_CONTENT_API_ERROR,partialErrorTag:i.jD.REDSKY_AGGREGATIONS_PARTNER_CONTENT_PARTIAL_API_ERROR,timerTag:i.sO.REDSKY_AGGREGATIONS_PARTNER_CONTENT_API_CALL});if(v)return null===p||void 0===p?void 0:p.data;throw new Error(`${P}`)}})},81844:function(e,r,t){t.d(r,{F:function(){return n},L:function(){return o}});const o=e=>null===e||void 0===e?void 0:e.partner,n=e=>{var r;return null===e||void 0===e||null===(r=e.partner)||void 0===r?void 0:r.content}}}]);